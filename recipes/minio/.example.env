# ==================================================
# Traefik configuration
# ==================================================

# Unique prefix used for Traefik router, service, and middleware names.
# Change this to avoid collisions when running multiple recipes/stacks.
TRAEFIK_SERVICE_PREFIX="recipe"

# Base domain used by Traefik routers.
# Results in domains like:
#   s3.recipe.127-0-0-1.sslip.io
#   minio.recipe.127-0-0-1.sslip.io
TRAEFIK_BASE_DOMAIN="${TRAEFIK_SERVICE_PREFIX}.127-0-0-1.sslip.io"

# Traefik certificate resolver (Step CA / ACME)
TRAEFIK_ACME_RESOLVER="stepca"

# Traefik entrypoints
TRAEFIK_HTTPS_ENTRYPOINT="websecure" # HTTPS (S3/MinIO Console)

# ==================================================
# MinIO configuration
# ==================================================

# Root (admin) username for MinIO.
# Used for:
# - Web console login
# - S3 API authentication
#
# Defaulting this to the service prefix keeps credentials scoped per recipe.
MINIO_ROOT_USER="${TRAEFIK_SERVICE_PREFIX}"

# Root (admin) password for MinIO.
# Required on first startup; changing it later requires manual intervention.
#
# This is intentionally simple for local development.
# Do NOT reuse in shared or production environments.
MINIO_ROOT_PASSWORD="supersecret"

# REQUIRED when MinIO is running behind a reverse proxy (Traefik).
#
# Prevents the S3 API from issuing redirects to the console URL.
# Without this, clients and browsers may be redirected to internal container
# addresses or unexpected hostnames.
MINIO_BROWSER_REDIRECT="false"

# REQUIRED when serving the MinIO Console through Traefik.
#
# MinIO ships with a restrictive CSP that assumes direct access.
# When proxied, this can block JS/CSS assets, resulting in:
# - blank pages
# - partially rendered UI
# - silent console failures
#
# This policy allows the console to load its required assets while remaining
# reasonably constrained for local development.
MINIO_BROWSER_CONTENT_SECURITY_POLICY="default-src 'self'; connect-src 'self' https://unpkg.com https://dl.min.io; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"
